const translations = {
  en: {
    header: "Welcome to my Portfolio",
    cv: "CV",
    about: "About Me",
    aboutText:
      "Software Developer specialized in Java, with a strong passion for emerging technologies. I am defined by motivation, ambition, and the constant pursuit of learning modern technologies and tools. Committed to my work, I possess strong adaptability and extensive experience in all types of development, both backend and frontend.",

    experience: "Experience",
    experienceText:
      "<div class='entry'><h3>Full Stack Developer & Analyst - NEORIS (March 2023 - Present)</h3><p>Development of web applications for the economy, employment, and environment departments of the Community of Madrid. Backend: Java, Spring Boot. Frontend: JavaScript, XHTML, JSP, CSS, Angular. Design and implementation of RESTful APIs, microservices-based architectures, and automated batch processes. Databases: Oracle, MySQL. Experience in team and project management, requirements gathering, technical analysis, incident resolution, maintenance, and migration processes. Task management through agile methodologies (SCRUM).</p></div>",

    education: "Education",
    educationText:
      "<div class='entry'><h3>Advanced Technician in Web Application Development</h3><p>CESUR (2021 - 2023)</p></div><div class='entry'><h3>Bachelor’s Degree in Computer Engineering</h3><p>University of Murcia (2017 - 2024)</p></div><div class='entry'><h3>Technological Baccalaureate</h3><p>Maristas High School (2015 - 2017)</p></div>",

    technologies: "Technologies",
    technologiesText:
      "<h3><strong>Languages:</strong></h3><div class='entry'>Java (Advanced)</div><div class='entry'>SQL / PLSQL (Advanced)</div><div class='entry'>JavaScript / TypeScript (High)</div><div class='entry'>HTML / CSS / SCSS / JSP / XHTML (Advanced)</div><div class='entry'>Python (High)</div><div class='entry'>PHP (High)</div><div class='entry'>Bash / SH / CSH (High)</div><div class='entry'>C / C++ (Intermediate)</div><div class='entry'>Pascal (Intermediate)</div><div class='entry'>Assembly (Intermediate)</div><br/><h3><strong>Frameworks:</strong></h3><div class='entry'>Spring Boot (High)</div><div class='entry'>Angular (Intermediate)</div><div class='entry'>Laravel (Intermediate)</div><br/><h3><strong>Repositories:</strong></h3><div class='entry'>Git (High)</div><div class='entry'>Subversion (High)</div><br/><h3><strong>DevOps:</strong></h3><div class='entry'>Jenkins</div><div class='entry'>SonarQube</div><div class='entry'>Docker</div><div class='entry'>Jira</div><br/><h3><strong>Tools & Environments:</strong></h3><div class='entry'>Android Studio</div><div class='entry'>IntelliJ IDEA</div><div class='entry'>Eclipse</div><div class='entry'>Visual Studio Code</div><div class='entry'>Postman</div><div class='entry'>Erwin Data Modeler</div><div class='entry'>Notion</div>",

    skills: "Skills",
    skillsText:
      "<li>Leadership & Responsibility</li><li>Creativity & Imagination</li><li>Problem Solving</li><li>Analytical Thinking</li><li>Self-taught</li><li>Client Requirements Gathering</li><li>Quality Focus</li><li>Adaptability</li>",

    projects: "Projects",
    projectsText:
      "<div class='entry'><h3>Project 1</h3><p>Development of a web application for managing resources and users in an educational environment. Technologies: Java, Spring Boot, Angular, MySQL.</p></div><div class='entry'><h3>Project 2</h3><p>Reservation system for an equipment rental company. Includes authentication, roles, and admin panel. Technologies: PHP, Laravel, Bootstrap.</p></div>",

    contact: "Contact",
    contactText: "Email",
  },
  es: {
    header: "Bienvenido a mi Portfolio",
    cv: "CV",
    about: "Sobre mí",
    aboutText:
      "Desarrollador de Software especializado en Java, con gran pasión por las tecnologías emergentes. Me definen la motivación, la ambición y la búsqueda constante de aprendizaje en tecnologías y herramientas modernas. Comprometido con mi trabajo, tengo una fuerte capacidad de adaptación y una amplia experiencia en todo tipo de desarrollos, tanto backend como frontend.",

    experience: "Experiencia",
    experienceText:
      "<div class='entry'><h3>Full Stack Developer & Analyst - NEORIS (Marzo 2023 - Actualidad)</h3><p>Desarrollo de aplicaciones web para las áreas de economía, empleo y medio ambiente de la Comunidad de Madrid. Backend: Java, Spring Boot. Frontend: JavaScript, XHTML, JSP, CSS, Angular. Diseño e implementación de APIs RESTful, arquitecturas basadas en microservicios y procesos batch automatizados. Bases de datos: Oracle, MySQL. Experiencia en gestión de equipos y proyectos, recogida de requisitos, análisis técnico, resolución de incidencias, mantenimiento y procesos de migración. Gestión de tareas mediante metodologías ágiles (SCRUM).</p></div>",

    education: "Educación",
    educationText:
      "<div class='entry'><h3>Técnico Superior en Desarrollo de Aplicaciones Web</h3><p>CESUR (2021 - 2023)</p></div><div class='entry'><h3>Grado en Ingeniería Informática</h3><p>Universidad de Murcia (2017 - 2024)</p></div><div class='entry'><h3>Bachillerato Tecnológico</h3><p>Colegio Maristas (2015 - 2017)</p></div>",

    technologies: "Tecnologías",
    technologiesText:
      "<h3><strong>Lenguajes:</strong></h3><div class='entry'>Java (Avanzado)</div><div class='entry'>SQL / PLSQL (Avanzado)</div><div class='entry'>JavaScript / TypeScript (Alto)</div><div class='entry'>HTML / CSS / SCSS / JSP / XHTML (Avanzado)</div><div class='entry'>Python (Alto)</div><div class='entry'>PHP (Alto)</div><div class='entry'>Bash / SH / CSH (Alto)</div><div class='entry'>C / C++ (Medio)</div><div class='entry'>Pascal (Medio)</div><div class='entry'>Ensamblador (Medio)</div><br/><h3><strong>Frameworks:</strong></h3><div class='entry'>Spring Boot (Alto)</div><div class='entry'>Angular (Medio)</div><div class='entry'>Laravel (Medio)</div><br/><h3><strong>Repositorios:</strong></h3><div class='entry'>Git (Alto)</div><div class='entry'>Subversion (Alto)</div><br/><h3><strong>DevOps:</strong></h3><div class='entry'>Jenkins</div><div class='entry'>SonarQube</div><div class='entry'>Docker</div><div class='entry'>Jira</div><br/><h3><strong>Herramientas y Entornos:</strong></h3><div class='entry'>Android Studio</div><div class='entry'>IntelliJ IDEA</div><div class='entry'>Eclipse</div><div class='entry'>Visual Studio Code</div><div class='entry'>Postman</div><div class='entry'>Erwin Data Modeler</div><div class='entry'>Notion</div>",

    skills: "Habilidades",
    skillsText:
      "<li>Liderazgo y Responsabilidad</li><li>Creatividad e Imaginación</li><li>Resolución de Problemas</li><li>Pensamiento Analítico</li><li>Autodidacta</li><li>Recolección de Requisitos del Cliente</li><li>Enfoque en la Calidad</li><li>Capacidad de Adaptación</li>",

    projects: "Proyectos",
    projectsText:
      "<div class='entry'><h3>Ultimate Util Calculator</h3><p>Desarrollo de una serie de mini programas como calculadoras, generadores, encriptadores y demás útiles.</p></div><div class='entry'><h3>File2File</h3><p>Aplicacion Java para la migración automática de scripts (bash, sh, csh).</p></div>",

    contact: "Contacto",
    contactText: "Correo",
  },
  de: {
    header: "Willkommen in meinem Portfolio",
    cv: "Lebenslauf",
    about: "Über mich",
    aboutText:
      "Softwareentwickler mit Spezialisierung auf Java und großer Leidenschaft für neue Technologien. Motivation, Ehrgeiz und der ständige Wunsch, moderne Tools und Technologien zu erlernen, zeichnen mich aus. Ich bin engagiert, anpassungsfähig und habe umfangreiche Erfahrung in der Backend- und Frontend-Entwicklung.",

    experience: "Berufserfahrung",
    experienceText:
      "<div class='entry'><h3>Full Stack Entwickler & Analyst – NEORIS (März 2023 – Heute)</h3><p>Entwicklung von Webanwendungen für die Bereiche Wirtschaft, Beschäftigung und Umwelt der Gemeinschaft Madrid. Backend: Java, Spring Boot. Frontend: JavaScript, XHTML, JSP, CSS, Angular. Entwurf und Implementierung von RESTful-APIs, Microservice-Architekturen und automatisierten Batch-Prozessen. Datenbanken: Oracle, MySQL. Erfahrung in Team- und Projektleitung, Anforderungserhebung, technischer Analyse, Fehlerbehebung, Wartung und Migrationsprozessen. Aufgabenmanagement mit agilen Methoden (SCRUM).</p></div>",

    education: "Ausbildung",
    educationText:
      "<div class='entry'><h3>Fachinformatiker für Webanwendungsentwicklung</h3><p>CESUR (2021 – 2023)</p></div><div class='entry'><h3>Bachelor in Informatik</h3><p>Universität Murcia (2017 – 2024)</p></div><div class='entry'><h3>Technisches Abitur</h3><p>Maristas Schule (2015 – 2017)</p></div>",

    technologies: "Technologien",
    technologiesText:
      "<h3><strong>Programmiersprachen:</strong></h3><div class='entry'>Java (Fortgeschritten)</div><div class='entry'>SQL / PLSQL (Fortgeschritten)</div><div class='entry'>JavaScript / TypeScript (Hoch)</div><div class='entry'>HTML / CSS / SCSS / JSP / XHTML (Fortgeschritten)</div><div class='entry'>Python (Hoch)</div><div class='entry'>PHP (Hoch)</div><div class='entry'>Bash / SH / CSH (Hoch)</div><div class='entry'>C / C++ (Mittel)</div><div class='entry'>Pascal (Mittel)</div><div class='entry'>Assembler (Mittel)</div><br/><h3><strong>Frameworks:</strong></h3><div class='entry'>Spring Boot (Hoch)</div><div class='entry'>Angular (Mittel)</div><div class='entry'>Laravel (Mittel)</div><br/><h3><strong>Versionsverwaltung:</strong></h3><div class='entry'>Git (Hoch)</div><div class='entry'>Subversion (Hoch)</div><br/><h3><strong>DevOps:</strong></h3><div class='entry'>Jenkins</div><div class='entry'>SonarQube</div><div class='entry'>Docker</div><div class='entry'>Jira</div><br/><h3><strong>Tools & Umgebungen:</strong></h3><div class='entry'>Android Studio</div><div class='entry'>IntelliJ IDEA</div><div class='entry'>Eclipse</div><div class='entry'>Visual Studio Code</div><div class='entry'>Postman</div><div class='entry'>Erwin Data Modeler</div><div class='entry'>Notion</div>",

    skills: "Fähigkeiten",
    skillsText:
      "<li>Führung & Verantwortung</li><li>Kreativität & Vorstellungskraft</li><li>Problemlösung</li><li>Analytisches Denken</li><li>Autodidakt</li><li>Anforderungsanalyse</li><li>Qualitätsorientierung</li><li>Anpassungsfähigkeit</li>",

    projects: "Projekte",
    projectsText:
      "<div class='entry'><h3>Projekt 1</h3><p>Entwicklung einer Webanwendung zur Ressourcen- und Benutzerverwaltung in einer Bildungsumgebung. Technologien: Java, Spring Boot, Angular, MySQL.</p></div><div class='entry'><h3>Projekt 2</h3><p>Reservierungssystem für ein Ausrüstungsverleihunternehmen mit Authentifizierung, Rollenverwaltung und Admin-Panel. Technologien: PHP, Laravel, Bootstrap.</p></div>",

    contact: "Kontakt",
    contactText: "E-Mail",
  },
};
/*
particlesJS.load(
  "particles-js",
  "https://cdn.jsdelivr.net/gh/VincentGarreau/particles.js@master/demo/particles.json"
);
*/

const sections = document.querySelectorAll("section");
const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  },
  { threshold: 0.2 }
);
sections.forEach((section) => observer.observe(section));

function showPopup() {
  document.getElementById("popup").style.display = "block";
}

function downloadCV(lang) {
  const url =
    lang === "es"
      ? "./files/CV-SanchezCarrasco-JoseLuis_es.pdf"
      : "./files/CV-SanchezCarrasco-JoseLuis_en.pdf";
  window.open(url, "_blank");
  document.getElementById("popup").style.display = "none";
}

function showLangPopup() {
  document.getElementById("langPopup").style.display = "block";
}

function goUp() {
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function setLanguage(lang) {
  localStorage.setItem("language", lang);
  const t = translations[lang];
  document.querySelector("header").innerText = t.header;
  document.querySelector("#cv").innerText = t.cv;
  document.querySelector("a[href='#about'] span").innerText = t.about;
  document.querySelector("a[href='#experience'] span").innerText = t.experience;
  document.querySelector("a[href='#education'] span").innerText = t.education;
  document.querySelector("a[href='#technologies'] span").innerText =
    t.technologies;
  document.querySelector("a[href='#skills'] span").innerText = t.skills;
  document.querySelector("a[href='#projects'] span").innerText = t.projects;
  document.querySelector("a[href='#contact'] span").innerText = t.contact;
  document.querySelector("#about h2").innerText = t.about;
  document.querySelector("#about p").innerText = t.aboutText;
  document.querySelector(
    "#experience"
  ).innerHTML = `<h2>${t.experience}</h2>${t.experienceText}`;
  document.querySelector(
    "#education"
  ).innerHTML = `<h2>${t.education}</h2>${t.educationText}`;
  document.querySelector(
    "#technologies"
  ).innerHTML = `<h2>${t.technologies}</h2>${t.technologiesText}`;
  document.querySelector(
    "#skills"
  ).innerHTML = `<h2>${t.skills}</h2><ul>${t.skillsText}</ul>`;
  document.querySelector(
    "#projects"
  ).innerHTML = `<h2>${t.projects}</h2>${t.projectsText}`;
  document.querySelector("#contact h2").innerText = t.contact;
  document.querySelector("#contact #mail").innerHTML = t.contactText;
  document.getElementById("langPopup").style.display = "none";
}

window.addEventListener("DOMContentLoaded", () => {
  const savedLang = localStorage.getItem("language") || "en";
  setLanguage(savedLang);

  // --- ANIMACIÓN DE PARTÍCULAS ---
  function startParticles() {
    if (window.particlesJS) {
      particlesJS("particles-js", {
        particles: {
          number: { value: 60, density: { enable: true, value_area: 800 } },
          color: { value: "#00ffee" },
          shape: { type: "circle" },
          opacity: { value: 0.3, random: true },
          size: { value: 3, random: true },
          line_linked: {
            enable: true,
            distance: 120,
            color: "#00ffee",
            opacity: 0.2,
            width: 1,
          },
          move: { enable: true, speed: 2 },
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" },
          },
          modes: {
            repulse: { distance: 100 },
            push: { particles_nb: 4 },
          },
        },
        retina_detect: true,
      });
    } else {
      setTimeout(startParticles, 100); // Espera y reintenta
    }
  }
  startParticles();

  // --- SONIDO EN BOTONES ---
  const clickSound = new Audio("sounds/click.mp3");
  const enterSound = new Audio("sounds/enter.mp3");
  document.querySelectorAll("button").forEach((button) => {
    button.addEventListener("click", () => {
      enterSound.currentTime = 0;
      enterSound.play();
    });
  });
  document.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      clickSound.currentTime = 0;
      clickSound.play();
    });
  });
});
